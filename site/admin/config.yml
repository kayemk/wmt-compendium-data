backend:
  name: github
  repo: kayemk/wmt-compendium-data
  branch: main
  open_authoring: true
  base_url: https://wmt-cms-auth.plain-flower-9acd.workers.dev
  auth_endpoint: auth

publish_mode: editorial_workflow

media_folder: "site/uploads"
public_folder: "/uploads"

collections:
  - name: "warbands"
    label: "Warbands"
    folder: "data/warbands"
    create: true
    extension: "yml"
    format: "yml"
    slug: "{{id}}"
    identifier_field: "name"
    fields:
      - label: "ID"
        name: "id"
        widget: "string"
        pattern: ["^[a-z0-9-]+$", "Use lowercase letters, numbers and hyphens only (e.g. reikland-mercenaries)."]
        hint: "Stable key. Don’t change after creation."
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Game", name: "game", widget: "string", default: "Warhammer More Time" }
      - label: "Source"
        name: "source"
        widget: "object"
        fields:
          - { label: "Name", name: "name", widget: "string" }
          - { label: "Page", name: "page", widget: "number", value_type: "int", required: false }
      - { label: "Summary", name: "summary", widget: "text", required: false }

      - label: "Units"
        name: "unit_ids"
        widget: "relation"
        collection: "units"
        search_fields: ["name", "id"]
        value_field: "id"
        display_fields: ["name", "id"]
        multiple: true

      - { label: "Tags", name: "tags", widget: "list", required: false }

  - name: "units"
    label: "Units"
    folder: "data/units"
    create: true
    extension: "yml"
    format: "yml"
    slug: "{{id}}"
    identifier_field: "name"
    fields:
      - label: "ID"
        name: "id"
        widget: "string"
        pattern: ["^[a-z0-9-]+$", "Use lowercase letters, numbers and hyphens only (e.g. swordsman)."]
        hint: "Stable key. Don’t change after creation."
      - { label: "Name", name: "name", widget: "string" }

      - label: "Type"
        name: "type"
        widget: "select"
        options: ["hero", "henchman", "hired_sword", "other"]

      - label: "Warbands"
        name: "warband_ids"
        widget: "relation"
        collection: "warbands"
        search_fields: ["name", "id"]
        value_field: "id"
        display_fields: ["name", "id"]
        multiple: true

      - label: "Cost"
        name: "cost"
        widget: "object"
        fields:
          - { label: "Gold", name: "gold", widget: "number", value_type: "int" }
          - { label: "Upkeep", name: "upkeep", widget: "number", value_type: "int", required: false }

      - label: "Profile"
        name: "profile"
        widget: "object"
        fields:
          - { label: "M",  name: "M",  widget: "number", value_type: "int" }
          - { label: "WS", name: "WS", widget: "number", value_type: "int" }
          - { label: "BS", name: "BS", widget: "number", value_type: "int" }
          - { label: "S",  name: "S",  widget: "number", value_type: "int" }
          - { label: "T",  name: "T",  widget: "number", value_type: "int" }
          - { label: "W",  name: "W",  widget: "number", value_type: "int" }
          - { label: "I",  name: "I",  widget: "number", value_type: "int" }
          - { label: "A",  name: "A",  widget: "number", value_type: "int" }
          - { label: "Ld", name: "Ld", widget: "number", value_type: "int" }
          - { label: "Sv", name: "Sv", widget: "number", value_type: "int", required: false }

      - label: "Equipment"
        name: "equipment"
        widget: "object"
        required: false
        fields:
          - { label: "Starting", name: "starting", widget: "list", required: false }
          - { label: "Options",  name: "options",  widget: "list", required: false }

      - { label: "Keywords", name: "keywords", widget: "list", required: false }
